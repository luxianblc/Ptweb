<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>推荐壁纸 - 鹿衔</title>
    
    <!-- 使用本地网站图标 -->
    <link rel="icon" href="assets/icons/favicon.ico" type="image/x-icon">
    
    <!-- 样式文件 -->
    <link rel="stylesheet" href="global.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- 主应用脚本 -->
    <script type="module" src="app.js"></script>
    
    <!-- 页面特定的JavaScript -->
    <script type="module">
        import { initImageGrid } from './modules/image-grid.js';
        
        // 壁纸数据
        const wallpapers = [
            {
                id: 1,
                title: "山间日出",
                description: "清晨的第一缕阳光洒在山峦之间",
                category: "nature",
                url: "assets/images/wallpapers/mountain-sunrise.jpg", // 改为本地路径
                resolution: "3840x2160"
            },
            {
                id: 2,
                title: "未来都市",
                description: "现代建筑与科技感的结合",
                category: "city",
                url: "assets/images/wallpapers/future-city.jpg",
                resolution: "3840x2160"
            },
            {
                id: 3,
                title: "抽象艺术",
                description: "色彩与线条的碰撞",
                category: "art",
                url: "assets/images/wallpapers/abstract-art.jpg",
                resolution: "2560x1440"
            },
            {
                id: 4,
                title: "科技芯片",
                description: "微观世界中的科技奇迹",
                category: "tech",
                url: "assets/images/wallpapers/tech-chip.jpg",
                resolution: "3840x2160"
            },
            {
                id: 5,
                title: "森林小径",
                description: "阳光透过树叶洒在蜿蜒的小路上",
                category: "nature",
                url: "assets/images/wallpapers/forest-path.jpg",
                resolution: "3840x2160"
            },
            {
                id: 6,
                title: "都市夜景",
                description: "夜幕下的城市灯火辉煌",
                category: "city",
                url: "assets/images/wallpapers/city-night.jpg",
                resolution: "3840x2160"
            },
            {
                id: 7,
                title: "街头涂鸦",
                description: "城市中的艺术表达",
                category: "art",
                url: "assets/images/wallpapers/street-graffiti.jpg",
                resolution: "2560x1440"
            },
            {
                id: 8,
                title: "数据可视化",
                description: "复杂数据的美丽呈现",
                category: "tech",
                url: "assets/images/wallpapers/data-visualization.jpg",
                resolution: "3840x2160"
            }
        ];
        
        // 页面加载完成后初始化
        document.addEventListener('DOMContentLoaded', () => {
            // 初始化壁纸网格
            const gridOptions = {
                enableFilter: true,
                filterButtons: document.querySelectorAll('.filter-btn'),
                enableSearch: true,
                searchInput: document.getElementById('searchInput'),
                cardTemplate: 'wallpaper'
            };
            
            initImageGrid(wallpapers, 'wallpaperGrid', gridOptions);
            
            // 初始化筛选按钮
            initFilterButtons();
            
            // 初始化搜索功能
            initSearch();
            
            console.log('壁纸页面初始化完成');
        });
        
        // 初始化筛选按钮
        function initFilterButtons() {
            const filterButtons = document.querySelectorAll('.filter-btn');
            let currentFilter = 'all';
            
            filterButtons.forEach(button => {
                button.addEventListener('click', function() {
                    filterButtons.forEach(btn => btn.classList.remove('active'));
                    this.classList.add('active');
                    currentFilter = this.getAttribute('data-filter');
                    
                    // 触发自定义事件，让 image-grid 模块处理筛选
                    document.dispatchEvent(new CustomEvent('filterChange', {
                        detail: { filter: currentFilter }
                    }));
                });
            });
        }
        
        // 初始化搜索功能
        function initSearch() {
            const searchInput = document.getElementById('searchInput');
            
            searchInput.addEventListener('input', function() {
                const searchTerm = this.value.toLowerCase();
                
                // 触发自定义事件，让 image-grid 模块处理搜索
                document.dispatchEvent(new CustomEvent('searchChange', {
                    detail: { searchTerm: searchTerm }
                }));
            });
        }
    </script>
</head>
<body>
    <!-- 组件插入点 -->
    <div id="header-insert"></div>
    
    <!-- 主内容 -->
    <main class="main-content">
        <div class="container">
            <div class="page-title">
                <h1>推荐壁纸</h1>
                <p>精选高质量壁纸，适用于桌面和移动设备。每周更新。</p>
            </div>

            <!-- 分类筛选 -->
            <div class="glass card mb-3">
                <div style="display: flex; justify-content: center; gap: 1rem; flex-wrap: wrap;">
                    <button class="btn btn-secondary filter-btn active" data-filter="all">全部</button>
                    <button class="btn btn-secondary filter-btn" data-filter="nature">自然</button>
                    <button class="btn btn-secondary filter-btn" data-filter="city">城市</button>
                    <button class="btn btn-secondary filter-btn" data-filter="art">艺术</button>
                    <button class="btn btn-secondary filter-btn" data-filter="tech">科技</button>
                </div>
                
                <div class="mt-2" style="text-align: center;">
                    <div style="position: relative; max-width: 400px; margin: 0 auto;">
                        <input type="text" id="searchInput" placeholder="搜索壁纸..." 
                               style="width: 100%; padding: 12px 20px; background: rgba(255,255,255,0.05); 
                                      border: 1px solid rgba(255,255,255,0.1); border-radius: 50px; 
                                      color: var(--text-color); font-size: 1rem;">
                        <i class="fas fa-search" style="position: absolute; right: 20px; top: 50%; transform: translateY(-50%); color: var(--text-secondary);"></i>
                    </div>
                </div>
            </div>

            <!-- 壁纸网格 -->
            <div class="image-grid" id="wallpaperGrid">
                <!-- 壁纸将通过JavaScript动态生成 -->
            </div>

            <div class="glass card mt-3 text-center">
                <h3>壁纸使用提示</h3>
                <p style="color: var(--text-secondary); margin-top: 1rem;">
                    所有壁纸均可免费用于个人用途。点击图片可查看大图，右键点击可选择"另存为"保存到本地。
                    建议使用高分辨率版本以获得最佳显示效果。
                </p>
            </div>
        </div>
    </main>
    
    <!-- 组件插入点 -->
    <div id="footer-insert"></div>
    <div id="lightbox-insert"></div>
</body>
</html>
